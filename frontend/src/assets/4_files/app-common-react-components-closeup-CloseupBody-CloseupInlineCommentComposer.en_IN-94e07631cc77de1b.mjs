(self.modernJsonp=self.modernJsonp||[]).push([["30644"],{596423:function(e,t,n){n.r(t),n.d(t,{default:()=>P});var o=n(667294),i=n(581722),r=n(20256),s=n(934645),a=n(111923),m=n(296691),c=n(624895),d=n(980787),l=n(657043),u=n(475498),_=n(821342),p=n(525839),g=n(2420),f=n(87853),h=n(542092),y=n(601686),x=n(611134),C=n(785893);let A=(0,o.memo)(function({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:n,disablePhotoCommentSelection:A,inCommentsImprovedDropdownExp:P,isEligibleForPinReactions:Z,isPDP:I,orbacSubjectId:j,pinId:w,privatePin:N,reactionByMe:S,reactionCounts:b,setIsLoadingNewlyCreatedComment:v,showCommentComposer:T,showReactBackground:D,storyPinDataId:E,viewParameter:k}){let J=(0,p.ZP)(),M=(0,_.Z)(),O=(0,i.I0)(),{logContextEvent:z}=(0,d.u)(),B=(0,a.Z)(),{showOneToast:L}=(0,f.dI)(),{clientTrackingParams:R}=(0,y.x4)(),W=(0,s.Z)({showProductDetailPage:!!I}),[U,F]=(0,o.useState)(!1),[G,H]=(0,o.useState)(m.A9.NONE);async function K(n){let{commentMedia:o,contentMarkdown:i,force:r,imageSignatures:s,tags:a}=n;if(null===e)return!1;v(!0);try{if(e){if(s.length){let t={aggregatedPinDataId:e,details:i,image_signatures:s,pin_id:w??"",username:M.isAuth?M.username:"",fromUnifiedComment:!0};await O((0,x.DD)(t))}else await B({commentMedia:o,force:r,fromUnifiedComment:!0,objectType:h.o.pin,objectId:e,pinId:w,tags:a,text:i,orbacSubjectId:j});z({event_type:7,clientTrackingParams:R,object_id_str:w,aux_data:{num_user_mention_tags:(a?JSON.parse(a):[]).length,...E?{creator_id:t,story_pin_data_id:E}:{}}})}}catch(e){return[g.ky,g.LJ].includes((0,l.Z)(e,"api_error_code")??0)?H((0,l.Z)(e,"api_error_code")===g.ky?m.A9.WARNING:m.A9.BLOCK):L(({hideToast:t})=>(0,C.jsx)(u.Z,{onHide:t,text:(0,l.Z)(e,"message_detail")||(0,l.Z)(e,"message")||J.bt("There was an issue posting your comment.", "There was an issue posting your comment.", "comment.post.errorMessage", undefined, true),type:"error"})),v(!1),!1}return F(!1),v(!1),!0}return(0,C.jsx)(r.xu,{marginTop:4*!!W,children:(0,C.jsx)(c.Z,{clientTrackingParams:R,commentCount:n,commentWarningModalState:G,disablePhotoCommentSelection:A,dismissCommentWarningModal:()=>H(m.A9.NONE),iconSize:I?20:void 0,inCommentsImprovedDropdownExp:P,isEligibleForPinReactions:Z,isLeftAligned:I,objectType:h.o.pin,onAddItem:K,onCancelItem:()=>F(!1),onEnter:()=>F(!0),pinId:w,privatePin:N,reactionByMe:S,reactionCounts:b,showCommentComposer:T,showReactBackground:!I&&D,statusType:U?"textInflightCreation":"textStaticDisplay",viewParameter:k})})});function P(e){return(0,C.jsx)(A,{...e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer.en_IN-94e07631cc77de1b.mjs.map