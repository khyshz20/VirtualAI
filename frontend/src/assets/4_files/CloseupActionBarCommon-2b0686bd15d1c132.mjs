(self.modernJsonp=self.modernJsonp||[]).push([["55759"],{523226:function(e,t,n){n.r(t),n.d(t,{default:()=>D});var i=n(667294),o=n(825332),a=n(20256),r=n(414772),s=n(693875),d=n(502447),l=n(934645),c=n(878709),p=n(346955),u=n(355940),h=n(821342),m=n(595935),g=n(15667),x=n(378888),y=n(448505),v=n(7872),f=n(611499),C=n(601686),j=n(790427),b=n(25837),w=n(310916),P=n(78762),S=n(785893);let _=(0,P.Z)(()=>Promise.all([n.e("81931"),n.e("95853"),n.e("64701")]).then(n.bind(n,713020)),void 0,e=>713020,"SaveAffordance",e=>["81931","95853","64701"]),k=(0,P.Z)(()=>n.e("73301").then(n.bind(n,115649)),void 0,e=>115649,"PostDownloadUpsellPopover",e=>["73301"]),I=(0,P.Z)(()=>Promise.resolve().then(n.bind(n,11919)),void 0,e=>11919,"SecondarySendButtonCommon",e=>[]),T=(0,P.Z)(()=>Promise.all([n.e("25418"),n.e("96415")]).then(n.bind(n,377733)),void 0,e=>377733,"ReactionPickerContainer",e=>["25418","96415"]),Z=(0,P.Z)(()=>n.e("8419").then(n.bind(n,20262)),void 0,e=>20262,"CloseupCommentButton",e=>["8419"]),B=(0,i.memo)(function({goBack:e,gridDescription:t,isDeletedStoryPin:n,inCommentsImprovedDropdownExp:P,inCommentsPopoverExp:B,isEligibleForAggregatedComments:D,isEligibleForPinReactions:A,isOnSecretBoard:E,onEditSubmit:R,pin:M,viewParameter:z,viewType:L,onSaveButtonClick:O,showRepinOnInitialRender:U,isStoryPin:W,actionBarContainerRef:F,outerPaddingSize:G=f.g9,maxWidth:Y,showLeadPin:H,scrollContainerRef:K}){let J=(0,o.TH)(),N=(0,y.Z)(),{showEnabledSaveBehavior:$}=(0,w.Yh)(!0),{imgSrc:q}=(0,c.G)(),{clientTrackingParams:X,showCloseupContentRight:Q,closeupWithinMasonryEnabled:V,peekCloseupEnabled:ee}=(0,C.x4)(),{viewType:et,viewParameter:en}=(0,p.SU)(),ei=(0,h.Z)(),eo=(0,v.q6)(ei,M?.pinner?.id,N),ea=(0,l.Z)({showProductDetailPage:!!M.is_eligible_for_pdp}),[er,es]=(0,i.useState)(!!(0,x.mB)(J.search).share),[ed,el]=(0,i.useState)(!1),{shareFromPostDownloadUpsell:ec,setShareFromPostDownloadUpsell:ep,saveToBoardFromPostDownloadUpsell:eu,setSaveToBoardFromPostDownloadUpsell:eh}=(0,r.tS)();(0,i.useEffect)(()=>{ec&&(es(!0),ep(!1))},[ec,ep]);let em=(0,i.useCallback)(e=>el(e),[]),eg=(0,i.useCallback)(()=>es(!1),[]),ex=(0,i.useCallback)(()=>es(e=>!e),[]),ey=M.board?.owner?.id||M.pinner?.id,{aggregated_pin_data:ev,comments_disabled:ef,reaction_counts:eC}=M,{isRTL:ej}=(0,g.B)(),eb=V?Y:Y||f.Gg,ew=(0,d.Z)({pinKey:{type:"deprecated",data:M},orbacActingAs:N,viewer:ei}),eP=!!Object.keys(eC||{}).length,eS=ev?.did_it_data?.images_count??0,e_=(ev?.comment_count??0)+eS,ek=E||n?null:(0,S.jsx)(u.Z,{name:"CloseupActionBar_SecondarySendButton",children:(0,S.jsx)(I,{closeupWithinMasonryEnabled:V,controllerOptions:{flyoutDisplayOptions:V?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{wrapperPosition:"fixed"},isFlyoutOpen:er,loggingOptions:{component:194,element:72,viewParameter:z||en,viewType:L||et},onFlyoutDismiss:eg,onToggleFlyout:ex,sendObject:{type:"pin",description:t,id:M.id,imageUrl:q,ownerId:ey,url:`/pin/${M.id}/`,clientTrackingParams:X}},showSendAnimation:!0})}),eI=(0,S.jsx)(a.xu,{alignItems:"center",color:V?"transparent":"default","data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:eb,rounding:2,children:(0,S.jsxs)(a.kC,{alignItems:"stretch",gap:2*!!V,justifyContent:"start",children:[!eo&&!!A&&(0,S.jsx)(u.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,S.jsxs)(a.xu,{alignItems:"center",display:"flex",marginEnd:2*!!eP,children:[(0,S.jsx)(T,{clientTrackingParams:X,handleReactionTrayHover:em,idealDirection:V?"down":void 0,pinId:M.id,reactionByMe:M.reaction_by_me,reactionIconSize:20,showTooltip:!0,viewParameter:z,viewType:L}),(0,S.jsx)(m.Z,{pinId:M.id,reactionCounts:eC,showPrettyNumber:!0})]})}),V&&!(P&&ef)&&(0,S.jsx)(Z,{inCommentsImprovedDropdownExp:!!P,inCommentsPopoverExp:!!B,isEligibleForAggregatedComments:!!D,pinKey:{type:"deprecated",data:M},scrollContainerRef:K,shouldShowCommentCount:!ef&&!!e_&&(!!B||!!P),totalCommentCount:e_,viewParameter:z,viewType:L}),ek,(0,S.jsx)(a.xu,{children:(0,S.jsx)(a.xu,{"data-test-id":"closeup-more-options",children:(0,S.jsx)(s.Z,{carouselSlotCurrentIndex:M&&M.carousel_data&&M.carousel_data.index,clientTrackingParams:X,closeupWithinMasonryEnabled:V,goBack:e,isReactionTrayOpen:ed,onEditSubmit:R,pinKey:{type:"deprecated",data:M},showEditPin:!n&&ew,viewParameter:z,viewType:L})})})]})}),eT=V?void 0:G,eZ=(0,S.jsxs)(a.xu,{ref:F,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:G/2,paddingRight:ej?void 0:eT,paddingLeft:ej?eT:void 0,paddingBottom:V?G/2:void 0,borderRadius:W?"0px 32px 32px 32px":Q?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:V?0:W?-5:0,width:V?"100%":void 0,children:[(0,S.jsx)(a.xu,{"data-test-id":"closeupActionBar",marginStart:ea?-3:void 0,children:(0,S.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"between",children:[eI,(0,S.jsx)(a.kC,{alignItems:"center",gap:2,children:!n&&!eo&&(0,S.jsx)(a.xu,{marginStart:3*!V,children:(0,S.jsx)(_,{boardCount:ei.isAuth?ei.boardCount:0,clientTrackingParams:X,onClickCallback:O,pin:M,saveToBoardFromPostDownloadUpsell:eu,setSaveToBoardFromPostDownloadUpsell:eh,showEnabledSaveBehavior:$,showRepinOnInitialRender:U,variant:"closeup",viewParameter:z,viewType:L})})})]})}),(0,S.jsx)(k,{})]});if(H||V)return eZ;let eB=W&&!ee?b.cI+4:b.hu;return ee&&(eB=0),(0,S.jsx)(a.Le,{top:eB,zIndex:j.mS,children:eZ})});function D(e){return(0,S.jsx)(B,{...e})}},595935:function(e,t,n){n.d(t,{Z:()=>x});var i=n(667294),o=n(20256),a=n(149739),r=n(521009),s=n(19585),d=n(709311),l=n(518459),c=n(355919),p=n(821806),u=n(785893);function h(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let m=(0,i.lazy)(()=>n.e("80948").then(n.bind(n,870828)));class g extends i.PureComponent{constructor(...e){super(...e),h(this,"state",{displayAggregationModal:!1}),h(this,"showAggregationModal",()=>{let{disableModal:e,logContextEvent:t}=this.props;e||(this.setState({displayAggregationModal:!0}),t({event_type:101,view_type:3,view_parameter:139,component:13458,element:11435,aux_data:{objectId:this.props.pinId}}))}),h(this,"hideAggregationModal",()=>{this.setState({displayAggregationModal:!1})})}render(){let{displayAggregationModal:e}=this.state,{isBold:t,isStoryPin:n,paddingY:i,pinId:r,reactionCounts:s,showPrettyNumber:h,size:g}=this.props,x=s?(0,c.At)(s):null,y=s?(0,c.Ud)(s):0,v=!!x&&x.length>0&&x.filter(e=>!!l.GY[e]).map((e,t)=>{let n=e&&l.GY[e]?l.GY[e]:"",{label:i,gridAsset:a}=(0,l.fW)(n,this.props.i18n);return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,u.jsx)(o.xu,{height:19,width:19,children:a&&(0,u.jsx)(o.Ee,{alt:i??"",fit:"cover",naturalHeight:1,naturalWidth:1,src:a})})},t)});return(0,u.jsxs)(o.xu,{children:[(0,u.jsx)(o.iP,{accessibilityLabel:`${y} reactions`,dataTestId:"reactions-count-button",onTap:this.showAggregationModal,children:!!v&&(0,u.jsx)(o.xu,{"data-test-id":"aggregated-reactions-container",display:"inlineBlock",children:h?(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},children:(0,u.jsx)(o.xv,{size:g??a.n,weight:"bold",children:(0,u.jsx)(d.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:y})})}):(0,u.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},"data-test-id":"aggregated-reactions-container",direction:"row",display:"flex",height:n?"auto":19,paddingY:i??6*!n,children:[(0,u.jsx)(o.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:v}),(0,u.jsx)(o.xu,{paddingX:1,children:(0,u.jsx)(o.xv,{color:t?"default":"subtle",size:g??a.n,weight:t?"bold":"normal",children:(0,u.jsx)(d.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:y})})})]})})}),e&&y&&(0,u.jsx)(p.Z,{children:(0,u.jsx)(m,{aggregatedReactions:v,onDismiss:this.hideAggregationModal,pinId:r,totalReactionCount:y})})]})}}h(g,"defaultProps",{isBold:!0});let x=function(e){let t=(0,s.Z)(),n=(0,r.Z)();return(0,u.jsx)(g,{...e,i18n:t,logContextEvent:n})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon-2b0686bd15d1c132.mjs.map