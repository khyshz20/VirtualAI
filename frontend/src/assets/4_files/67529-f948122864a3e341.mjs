(self.modernJsonp=self.modernJsonp||[]).push([["67529"],{351222:function(e,t,n){n.d(t,{Pw:()=>i,SB:()=>r,ZP:()=>o,x9:()=>a});let i=80,r=55,a=e=>"phone"===e?r:i;function o(e,t){return t?0:a(e)}},473304:function(e,t,n){n.d(t,{Z:()=>c});var i=n(667294),r=n(20256),a=n(937805),o=n(667835),s=n(461951),l=n(816358),d=n(516114),u=n(785893);function c({children:e,footerConfig:t,headerConfig:n,height:c,hideOnScroll:p,hideOnScrollState:{isHidden:m,updateHiddenState:f},isFooterHidden:g,noPadding:h,paddingX:E,paddingY:_=d.og,type:y,zIndex:A}){let S,T,{headerLimitedOverflow:v,ignoreObstructions:I,zIndexForGestaltBug:b}=n||{},{appUpsellFooterConfig:w,footerInLego:R,navFooterConfig:C}=t||{},O=!!w,N="header"===y?"top":"bottom",P=(0,o.vs)(),{mWebCloseupRedesignEnabled:L}=(0,a.Z)(),M=(0,i.useRef)(null),B=(0,i.useRef)(null);(0,i.useEffect)(()=>{try{if(!I){let e=M.current;B.current=v&&e&&Array.isArray(e.children)?e.children[0]:e,B.current instanceof HTMLElement&&l.Z.addObstruction(N,B.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!I&&B.current instanceof HTMLElement&&l.Z.removeObstruction(N,B.current)}},[I,v,N,P]);let Z="top"===N?"relative":"fixed",D=h?0:_,x=(c??d.R$)+(n?.overrideTop||0),H=p||C?{transition:R||L?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...m||g?{transform:`translateY(${"top"===N?-x:x}px)`,opacity:R||L?0:1}:Object.freeze({})}:{},$=2*!("relative"!==Z||n?.noGutter),U=$?-$:0,k=P?o.k7:"rgba(255,255,255,.95)";P&&("header"===y?S=-1:T=-1);let G=R?O?void 0:c??d.R$:"100%",j=R?d.KJ:void 0,z=n?.isTranslucent&&k||P?k:s.Wmm,F=n?.isTransparentBackground&&s.Wyp?s.Wyp:z,V=(0,i.useMemo)(()=>({height:"footer"===y&&L?`calc(${G} + env(safe-area-inset-bottom))`:G,...L&&"footer"===y?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(D||0)}px)`}:Object.freeze({})}),[L,G,y,D]);return(0,u.jsx)(r.xu,{ref:M,bottom:"footer"===y,dangerouslySetInlineStyle:{__style:{top:S,bottomStyle:T,...!A||b?{zIndex:b||1}:Object.freeze({}),...v?{background:"transparent",overflow:"hidden",paddingBottom:d.UB,marginBottom:-d.UB,pointerEvents:"none"}:Object.freeze({}),...n?.hasBorder?{borderBottom:d.dS}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...H}},"data-test-id":y,display:O?"flex":void 0,height:c&&!R?c:void 0,left:!0,marginEnd:R?"auto":U,marginStart:R?"auto":U,onTransitionEnd:()=>{(p||C)&&B.current&&(m||g?l.Z.removeObstruction(N,B.current):l.Z.addObstruction(N,B.current))},position:Z,right:!0,top:"header"===y,width:R||"fixed"!==Z?void 0:"100%",zIndex:b?void 0:A,children:(0,u.jsx)(r.xu,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:F,...V,boxShadow:L&&"footer"===y?`0 10px 0 0 ${F}, ${d.KJ}`:j,marginBottom:R&&!C?.docked?16:void 0,...v?{pointerEvents:"auto"}:Object.freeze({}),...n?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:R||t?.alignCenter?"flex":void 0,marginEnd:R?"auto":void 0,marginStart:R?"auto":void 0,paddingX:E||4*("footer"===y&&!h)+$,paddingY:D,position:"relative",rounding:R&&!C?.docked?"pill":void 0,width:C?C.footerWidth:O?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:f}):e})})}},588367:function(e,t,n){n.r(t),n.d(t,{default:()=>l});var i=n(20256),r=n(516114),a=n(473304),o=n(211887),s=n(785893);function l({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:n,isTranslucent:l,isTransparentBackground:d,noGutter:u,overrideTop:c,useRoundedCorners:p,zIndexForGestaltBug:m,...f}){let{noPadding:g,paddingY:h=r.og,zIndex:E}=f;return(0,s.jsx)(i.Le,{height:t?r.LV+2*(g?0:h)*4:void 0,top:c||0,zIndex:E||void 0,children:(0,s.jsx)(o.Z,{hideOnScroll:f.hideOnScroll,children:i=>(0,s.jsx)(a.Z,{...f,headerConfig:{isTranslucent:l,isTransparentBackground:d,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:n,noGutter:u,overrideTop:c,zIndexForGestaltBug:m,useRoundedCorners:p},hideOnScrollState:i,type:"header"})})})}},211887:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),r=n(159527);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends i.Component{constructor(...e){super(...e),a(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),a(this,"lastScrollPos",0),a(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),a(this,"handleScroll",(0,r.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state,i=window.scrollY,r=i-this.lastScrollPos,a="none",{scrollHeight:o,clientHeight:s}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(s)||(a=r<0?i<=Math.abs((window.scrollMinY||0)+Math.max(r,20))?"start":"none":i>=(window.scrollMaxY||o-s)-Math.max(r,20)?"end":"none");let l=55*!t?.isModal;e?r>20&&n&&i>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(r<-20&&!n||i<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===a&&!n||i<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(i>l||"end"===a)&&n&&(this.updateHiddenState(!1),t?.onScroll(!1)):(r<-20||"start"===a)&&n||i<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(r>20||"end"===a)&&!n&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=i},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state;return e({isHidden:!t?.forceShow&&n,updateHiddenState:this.updateHiddenState})}}},55543:function(e,t,n){n.d(t,{Z:()=>r});var i=n(603316);function r(e,t){return new Promise((n,r)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if("FACEBOOK"===t)if(window.FB)n();else{let t=setInterval(()=>{window.FB||20===e?(clearInterval(t),n()):(e+=1,(0,i.nP)(`mweb.loadScript.facebook.tries_${e}`,{sampleRate:.01}))},100)}else if("GSI"===t)if(window.google)n();else{let t=setInterval(()=>{window.google||20===e?(clearInterval(t),n()):(e+=1,(0,i.nP)(`mweb.loadScript.gsi.tries_${e}`,{sampleRate:.01}))},100)}else n()}else{let t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",()=>n()),t.addEventListener("error",r),document.getElementsByTagName("head")[0].appendChild(t)}})}},453179:function(e,t,n){n.d(t,{Mt:()=>S,NK:()=>E,P6:()=>a,UE:()=>v,ZE:()=>f,Zt:()=>g,_J:()=>d,_S:()=>_,cL:()=>p,iR:()=>y,jL:()=>l,oN:()=>r,oU:()=>T,rM:()=>m,sV:()=>u,sY:()=>c,vj:()=>h,yp:()=>o});var i=n(239728);let r=5e3,a=5e3/i.gJ,o="Pin page",s=["Uploaded by user"],l=(e,t)=>!!t&&!e,d=e=>!!e&&5!==e,u=e=>["email","messages","deep_linking"].includes(e),c=e=>!!e&&"gif"===e,p=({embedSrc:e,embedSubtype:t,embedType:n})=>!!e&&!c(n)&&"pinstory"!==t,m=({link:e,mobileLink:t,trackedLink:n,utmLink:i})=>!t&&!i&&!n&&!e,f=e=>/pin.it/gim.test(e||""),g=({link:e,mobileLink:t,origImageUrl:n,trackedLink:i,utmLink:r})=>t||r||i||e||n||"",h=e=>"string"==typeof e&&(e.includes("#recipe")||e.includes("#:~:text=")),E=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function _(e){for(let t of s)if(e===t)return!1;return!0}function y(e){if(!e)return!1;let{id:t,videos:n}=e;if(t&&n?.id&&n.video_list){let{V_720P:e,V_HLSV4:t,V_HLSV3_MOBILE:i}=n.video_list;if(e&&A(e)||t&&A(t)||i&&A(i))return!0}let i=e.story_pin_data?.pages?.[0]?.blocks;if(i){for(let e of i)if("story_pin_video_block"===e.type&&e?.video)return!0}return!1}function A(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}function S(e){return e?/(?:v\/|V\/|be\/|(?:\?|&)v=|embed\/|shorts\/)([\w-]+)/.exec(e)?.[1]??null:null}function T({isVideo:e,link:t}){return!!e&&!!t&&!!/(youtu(|.)be)/.exec(t)&&!!S(t)}let v=e=>"button"in e&&1===e.button},622481:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},282803:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},255957:function(e,t,n){n.d(t,{Z:()=>P});var i=n(667294),r=n(286036),a=n(457636),o=n(592109),s=n(901360),l=n(392824),d=n(67831),u=n(703393),c=n(735201),p=n(868178),m=n(891631),f=n(594885),g=n(579358),h=n(970773),E=n(361423),_=n(15667),y=n(112114),A=n(603316),S=n(785893);let T=["initial_app_load","client_route_push"],v=(0,o.XV)("PwtSurface"),I="NavigationComplete",b="VisuallyComplete",w=()=>{(0,c._T)()},R=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let n=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t])),{metricConfig:{metricId:i,pwtStaticContext:r,annotateExperiments:o},annotations:d,binaryAnnotations:p,constraintMap:m,startTime:f,imageTimings:h,spans:E,traceId:_}=e;(0,l.L8)(`Report_PWT_Complete_${(0,a.KJ)(i)}`,f,n);let y=(0,u.W)({annotateExperiments:[...o??[]],annotations:d,binaryAnnotations:p,constraintMap:m,endTime:n,imageTimings:h,metricId:i,pwtStaticContext:r,startTime:f,traceId:_,spans:E});try{var t=String(y.binaryAnnotationMap["metricId.surface"].value);let e=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let n=t.name.replace(".jpg","").split("/");return{[n[n.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{});[...Array.from(document.getElementsByTagName("img")).map(t=>{let n=t.src.replace(".jpg","").split("/"),i=n[n.length-1];if(e[i]){let n=(0,g.rZ)(t)?.width||1,r=e[i].downloadSize;return{fileName:i,renderedSize:n,downloadedSize:r,ratio:r/n}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(t=>{let n=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),i=n[n.length-1];if(e[i]&&t instanceof HTMLDivElement){let n=(0,g.rZ)(t)?.width||1,r=e[i].downloadSize;return{fileName:i,renderedSize:n,downloadedSize:r,ratio:r/n}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(e=>{let{ratio:n,fileName:i,downloadedSize:r}=e;e.ratio>1.05&&(0,s.A9)(`checkImageRatio.${t}`,{count:Math.round(10*n)/10,tags:{fileName:`${r}_${i}`}})})}catch(e){(0,s.H)("image_ratio_check_error",{error:e})}return(0,c._T)(),{...e,result:y,status:"DONE"}}return v(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},C=(e,t)=>{let{constraint:n,time:i}=t,r=(0,a.KJ)(e.metricConfig.metricId);return E.Z?e.metricConfig.constraints.find(e=>e===n)?e.constraintMap[n]?(v(`constraint "${n}" is already complete.`),(0,s.H)("duplicated_constraint_complete",{constraint:n,action:r}),e):(v(`marking constraint "${n}" as complete ${i||performance.now()}`),i?(0,l.ZP)(`constraint_${n}_is_complete`,i):(0,l.ZP)(`constraint_${n}_is_complete`),R({...e,constraintMap:{...e.constraintMap,[n]:i||E.Z.now()}})):(v(`marked constraint "${n}" is not a required constraint.`),e):((0,s.H)("missing_window_performance",{action:r}),e)},O=(e,t)=>{if(v("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{let{metricConfig:n,startTime:i,isSampled:r,disablePWTLogging:o}=t;if(o||"TIMING"!==e.status||i===e.startTime||w(),!n)return{status:"DISABLED",metricConfig:null};let l=(0,a.KJ)(n.metricId);if("TIMING"===e.status&&e.startTime===i&&e.constraintMap[I])return(0,s.H)("duplicated_init_route_action",{action:l}),e;if(!o){let e=(0,y.H)();(0,s.A9)(`handler.${l}`,{tags:{handler:e}});let t=void 0!==n.metricId.isAuthenticated&&{tags:{isAuth:n.metricId.isAuthenticated}}||void 0;"Other"===n.pwtStaticContext.browserName&&!1===n.metricId.isAuthenticated&&"initial_app_load"===n.metricId.navigationType?((0,s.A9)(`TIMING.${l}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,s.A9)(`TIMING.sampled.${l}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,s.A9)(`TIMING.${l}`),(0,s.A9)(`TIMING.sampled.${l}`,{sampleRate:.03})),(0,p.C)({resultLog:`TIMING.${l}`,annotateExperiments:n.annotateExperiments||[],getExperimentGroup:n.pwtStaticContext.getExperimentGroup,options:t})}return C({traceId:(0,c.vc)()||(0,c.ZP)("initial_app_load"===n.metricId.navigationType,n.pwtStaticContext.serverData?.trace_id),status:"TIMING",metricConfig:n,startTime:i,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:r,spans:[]},{constraint:I,disablePWTLogging:o})})(e,t.payload);if("TIMING"!==e.status)return v(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":w();let n={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:n};case"ANNOTATE":let{name:i}=t.payload;if(!E.Z)return e;let r=E.Z.now();return v(`adding annotation {${i}: ${r}}`),{...e,annotations:{...e.annotations,...{[i]:r}}};case"BINARY_ANNOTATE":let{name:o,value:l,annotationType:d}=t.payload;return v(`adding binary annotation {${o}: ${l}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[o]:{value:l,type:d}}}};case"MARK_CONSTRAINT_COMPLETE":return C(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!E.Z){let t=(0,a.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}v(`removing constraint "${t}"`);let n=e.metricConfig.constraints.filter(e=>e!==t),{[t]:i,...r}=e.constraintMap;return R({...e,constraintMap:r,metricConfig:{...e.metricConfig,constraints:n}})})(e,t.payload);case"SET_SEGMENT":var u=t.payload;if(!E.Z){let t=(0,a.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}v(`updating pwt segment to "${u}"`);let m={...e.metricConfig.metricId,segment:u};return{...e,metricConfig:{...e.metricConfig,metricId:m}};case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:n}}=t;if(0===n.length)return w(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let i=Math.max(...n.map(e=>e.responseEnd||0));return C({...e,imageTimings:n},{constraint:b,time:i})}case"ADD_SUBSPAN":let{startTime:f}=e,{payload:{name:g,startTime:_,endTime:A,annotations:S,binaryAnnotations:T,parentId:O}}=t;return{...e,spans:[...e.spans,{name:g,id:(0,h.Z)(),startTime:_||f,endTime:A,annotationMap:{...S},binaryAnnotationMap:{...T},parentId:O}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,h.Z)(),startTime:E.Z?E.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let N=e.spans.findIndex(e=>e.name===t.payload.name);return N>-1?(e.spans[N].endTime=E.Z?E.Z.now():0,t.payload.annotations&&(e.spans[N].annotationMap={...e.spans[N].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[N].binaryAnnotationMap={...e.spans[N].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,s.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let P=(0,a.KJ)(e.metricConfig.metricId);return(0,s.H)("invalid_pwt_surface_action",{action:P}),e}},N=new Set;function P({children:e,...t}){let n=(0,m.Z)(),o=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(n),l=t.measureGridVisuallyComplete?["web_masonry_v2"]:[],u=[...t.annotateExperiments??[],...l],{context:c}=(({surface:e,constraints:t,segment:n,measureGridVisuallyComplete:a,annotateExperiments:o,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:l,navigationType:d},sampleRate:u})=>{let c=(0,i.useRef)("NOT_SET"),p=(0,f.Z)(),{getState:m,dispatch:g}=((e,t)=>{let n=(0,i.useRef)(t);return{getState:()=>n.current,dispatch:t=>{n.current=e(n.current,t)}}})(O,{status:"DISABLED",metricConfig:null}),h=(0,_.B)();if(c.current!==l&&(c.current=l,p)){let{isAuthenticated:i}=p,r=e&&d&&(s||T).includes(d)?{metricId:{type:"surface",surface:e,navigationType:d,isAuthenticated:i,segment:n},annotateExperiments:o,constraints:[I,...t||[],...a?[b]:[]],pwtStaticContext:p}:null;(0,A.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:d,isAuthenticated:i}});let c=!N.has(l);g({type:"INIT_ROUTE",payload:{metricConfig:r,startTime:l?l.time:0,isSampled:!u||Math.random()<u,disablePWTLogging:!c}}),c&&N.add(l)}let S=m();if((0,i.useEffect)(()=>()=>{N.delete(l)},[l]),(0,i.useEffect)(()=>{let e=e=>{g({type:"ABORT",reason:e})};r.Z.onSessionPause(e);let t=window.innerHeight,n=window.innerWidth,i=()=>{let e=Math.abs(window.innerHeight-t),r=Math.abs(window.innerWidth-n),a=window.innerHeight!==t,o=window.innerWidth!==n,s={handler:(0,y.H)(),deviceType:p?.deviceType??"unknown",isAuthenticated:p?.isAuthenticated??"unknown",platform:h.userAgent.platform??"unknown"};if((0,A.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:a,widthChanged:o}}),a&&(0,A.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),o&&(0,A.S0)("webapp.PwtLogger.resizeWidthDelta",r,{sampleRate:1,tags:s}),window.removeEventListener("resize",i),p?.deviceType==="phone"&&(!o&&a&&e<=150||!a&&!o)||p?.deviceType==="desktop"&&!a&&!o)return void(0,A.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:a,widthChanged:o}});g({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",i),()=>{let t=m();v("handling unmount",t),"TIMING"===t.status&&w(),r.Z.removePauseListener(e),window.removeEventListener("resize",i)}},[]),"TIMING"!==S.status||!S.constraintMap[I])return{state:S,context:null};let{startTime:R,metricConfig:C}=S;return{state:S,context:{abort:e=>g({type:"ABORT",reason:e}),addAnnotation:e=>g({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,n)=>g({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:n}}),addSubspan:(e,t,n,i={},r={},a=null)=>g({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:r,parentId:a}}),getId:()=>R,getMetricId:()=>C.metricId,markConstraintComplete:e=>g({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:E.Z?E.Z.now():0}}),removeConstraint:e=>g({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>g({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:C.constraints.includes(b)?e=>g({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},n={},i=null)=>g({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:i}}),stopSubspan:(e,t={},n={},i=null)=>g({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:i}})}}})({...t,annotateExperiments:u,navigationInfo:{navigationType:o,clientNavigation:n}}),p=(0,d.A)(),g=!!p;return(0,i.useEffect)(()=>{if(g){let e=p?.getMetricId(),t=e?(0,a.KJ)(e):null;(0,s.H)("nested_pwt_surface",{action:t})}},[g]),(0,S.jsx)(d.S,{value:c,children:e})}},67831:function(e,t,n){n.d(t,{A:()=>r,S:()=>i});let{Provider:i,getMaybe:r}=(0,n(729434).Z)("pwtSurfaceContext")},891631:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),r=n(622481);function a(){return(0,i.useContext)(r.Z)}},594885:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),r=n(282803);function a(){return(0,i.useContext)(r.Z)}},324307:function(e,t,n){n.d(t,{ZP:()=>r,mP:()=>i});let i="…";function r(e,t=80,n=i,a=!1){let o;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||a)o=e.substring(0,t);else{let n=e.lastIndexOf(" ",t);o=e.substring(0,n)}return(o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+n}},576087:function(e,t,n){n.d(t,{Z:()=>r});var i=n(869273);let r=({url:e})=>{let t=(0,i.Z)("/");return 0===e.lastIndexOf(t,0)?e.substr(t.length-1):e}},239728:function(e,t,n){n.d(t,{$f:()=>r,Cy:()=>l,DR:()=>i,Fm:()=>s,bR:()=>o,gJ:()=>a,lG:()=>d});let i=1,r=2,a=1e3,o=1e3,s=1e3,l=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),d=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})},821651:function(e,t,n){n.d(t,{r:()=>E,W:()=>h});var i=n(667294),r=n(729434),a=n(821342),o=n(886981),s=n(295317),l=n(121836),d=n(238589),u=n(974705);let c=e=>{let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&("object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?t[(0,u.Z)(n)]=e[n]:t[(0,u.Z)(n)]=c(e[n]));return t},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},m=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}};var f=n(785893);let{Provider:g,getMaybe:h}=(0,r.Z)("RoleBasedAccessControlContext"),E=({children:e})=>{let t=(0,a.Z)(),n=!!(t.isAuth&&t.isPartner),{state:r,actions:u,receiveProfiles:h}=(e=>{let[t,n]=(0,i.useReducer)(m,p),r=(({dispatch:e,isEnabled:t,state:n})=>{let{orbacVisibility:r,disableProfileChanger:a,headerVisible:o}=n,s=(0,i.useCallback)(n=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:n})},[t,e]);return{changeProfile:s,toggleORBACVisibility:(0,i.useCallback)(n=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:n??!r})},[t,e,r]),toggleDisableProfileChanger:(0,i.useCallback)(n=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:n??!a})},[t,e,a]),toggleHeaderVisibility:(0,i.useCallback)(n=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:n??!o})},[t,e,o])}})({dispatch:n,isEnabled:e,state:t}),{activeProfile:a,orbacVisibility:o}=t;return(0,i.useEffect)(()=>{let e=(0,d.Nl)().getItem(l.Zo)||!1;e&&n({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,d.Nl)().getItem(l.ig)||!1;e&&n({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,d.Nl)().setItem(l.ig,o)},[o]),(0,i.useEffect)(()=>{(0,d.Nl)().setItem(l.Zo,a)},[a]),{state:t,actions:r,receiveProfiles:(0,i.useCallback)((e,t)=>{n({type:"LOAD_PROFILES",payload:((e,t)=>{let n=[];for(let i in e)i!==t&&n.push({id:i,...c(e[i])});let i=n.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),r=new Map;for(let e of i)r.set(e.id,e);return r})(e,t)})},[n])}})(n),{activeProfile:E,headerVisible:_,profiles:y}=r,A=(0,i.useMemo)(()=>y?Array.from(y.values()):[],[y]),S=(0,s.Z)(A),T=!!t.isAuth&&A.length>0&&S,v=t.isAuth?t.id:"",I=t.isAuth?t.username:"",{changeProfile:b,toggleORBACVisibility:w,toggleDisableProfileChanger:R,toggleHeaderVisibility:C}=u;(0,i.useEffect)(()=>{if(n){if("string"==typeof S)return void b(S);E||b(v)}},[S,v,n,b,E]),(0,i.useEffect)(()=>{n&&(T&&!_&&C(!0),!T&&_&&C(!1))},[C,T,n,_,y]);let{data:O}=(0,o.Z)(n?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),N=O?.profiles,P=(0,i.useMemo)(()=>t&&t.isAuth&&E===t.id?{id:t.id,permissions:["OWNER"],user:{username:I,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:E&&y?y.get(E):void 0,[E,y,t,I]);(0,i.useEffect)(()=>{N&&h(N,v)},[h,N,v]);let L=(0,i.useMemo)(()=>({profiles:A,headerVisible:_,activeProfile:P,changeProfile:b,toggleORBACVisibility:w,toggleDisableProfileChanger:R,toggleHeaderVisibility:C}),[A,_,P,b,w,R,C]);return(0,f.jsx)(g,{value:L,children:e})}},448505:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294),r=n(274320),a=n(821651),o=n(295317);let s=Object.freeze({}),l=()=>{let{checkExperiment:e}=(0,r.r)(),t=(0,a.W)(),{activeProfile:n}=t||{},l=(0,o.Z)(t?.profiles||[]),{anyEnabled:d}=e("useorbacroutematcher_in_useorbacactingas");return(0,i.useMemo)(()=>d&&!l?s:n&&(n.viewerMeetsMfaRequirement||(n.permissions||[]).includes("OWNER"))?n:s,[d,l,n])}},295317:function(e,t,n){n.d(t,{Z:()=>l});var i=n(616550),r=n(825332),a=n(821342),o=n(506662),s=n(169053);let l=e=>{let t=(0,r.TH)(),n=(0,a.Z)(),l=(0,s.S6)(),d=(0,i.$B)("/:username"),u=d?.params?.username,c=(0,i.$B)("/pin/:id"),p=!!c?.params?.id&&l(c.params.id)?.pinner?.id;if((0,o.ej)(t))return!1;if((0,o.RU)(t)||(0,o.mY)(t))return!0;let m=e.concat(n.isAuth?{user:{username:n.username},id:n.id}:{}).find(e=>{if(!e)return!1;let{user:t,id:n}=e;return(!!t&&"username"in t&&!!t.username&&!!u||!!p&&!!n)&&(t.username===u||p===n)});return!!m&&m.id}},7872:function(e,t,n){n.d(t,{D3:()=>c,DX:()=>d,Fk:()=>i,KY:()=>p,Ms:()=>r,N1:()=>m,_P:()=>l,gJ:()=>a,lJ:()=>s,nl:()=>o,q6:()=>u});let i=(e,t)=>{let n=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(n=t.user.businessName),n},r=(e,t)=>{let n=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(n=t.user.username),n},a=(e,t)=>{let n=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(n=t.user.imgUrl),n},o=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,n)=>n&&n.user&&t&&t.isAuth&&n.id!==t.id?n.user.merchantId:e.advertiser?.merchant_id,d=(e,t,n)=>n&&n.user&&e.isAuth&&n.id!==e.id?n.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,u=(e,t,n)=>!!(e&&e.isAuth&&n&&n.id&&n.id!==e.id&&n.id===t),c=(e,t,n)=>!!(u(e,t,n)||e&&e.isAuth&&t===e.id),p=(e,t,n)=>c(e,t&&t.owner&&t.owner.id||"",n);function m(e,t,n){return c(e,t?t.id:"",n)}},271597:function(e,t,n){n.d(t,{AC:()=>o,FC:()=>u,FP:()=>l,M0:()=>s,SA:()=>p,Xq:()=>c,Y_:()=>a,o2:()=>r,s0:()=>i,z9:()=>d});let i=44,r=40,a=49,o=69,s=236,l=157,d=320,u=213,c=7,p=["US","GB","CA","FR","DE","AT","CH","IT","ES","AU","BR","NL","MX"]},907586:function(e,t,n){n.d(t,{_9:()=>a,o6:()=>i,tg:()=>r});let i=20,r=24,a=20},80245:function(e,t,n){n.d(t,{By:()=>u,IT:()=>d,N6:()=>r,br:()=>a,jq:()=>s,lU:()=>l,tq:()=>o});var i=n(686319);let r=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),a=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),o=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),s=(e,t,n)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:n}}),l=(e,t,n)=>r=>{(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,n),r("PERSONAL"===e?{type:"CLEAR_RECENT_PERSONAL_SEARCHES"}:{type:"CLEAR_RECENT_SEARCHES"})},d=(e,t,n,r,a)=>o=>{n||(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(r,a),o("PERSONAL"===t?{type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}:{type:"CLEAR_RECENT_SEARCH",payload:{query:e}})},u=e=>t=>{t({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}})}},404005:function(e,t,n){n.d(t,{Z:()=>m});var i=n(20256),r=n(121836),a=n(588367),o=n(15667),s=n(238589),l=n(351222),d=n(647709),u=n(785893);let c=new i.Ry(1),p=new i.H3([c]);function m({children:e,hideOnScroll:t=!1,fixedHeaderRefHeight:n,paddingY:i=0,hasBorder:c=!1,isTransparentBackground:m=!1}){let f=(0,d.ZP)(),{isAuthenticated:g}=(0,o.B)(),h="true"===s.ZP.getItem(r.m5);return(0,u.jsx)(a.default,{hasBorder:c,height:t?n:void 0,hideOnScroll:t,isTransparentBackground:m,overrideTop:"tablet"===f||h?0:(0,l.ZP)(f,g),paddingY:i,zIndex:p,children:e})}},339618:function(e,t,n){n.d(t,{Z:()=>i});function i({appliedFilters:e,article:t,autoCorrectionDisabled:n,filters:i,journeyDepth:r,query:a,scope:o,selectedOneBarModules:s,sourceId:l,sourceModuleId:d,topPinIds:u}){let c=[o,a,i,e,t,l,d,r,u].map(e=>e??"").join(":");return n&&(c+=":auto-correction-disabled"),s&&(c+=`:${s}`),c}},100785:function(e,t,n){n.d(t,{V:()=>a,q:()=>o});var i=n(378888),r=n(339618);let a=e=>{let{category:t,domains:n,price_max:r,price_min:a}=(0,i.mB)(e);return[t,n,r,a].map(e=>e??"").join("-")},o=(e,t)=>(0,r.Z)({appliedFilters:a(e),article:(0,i.mB)(e).b_id??"",autoCorrectionDisabled:(0,i.mB)(e).auto_correction_disabled??"",filters:(0,i.mB)(e).filters??"",journeyDepth:(0,i.mB)(e).journey_depth??"",query:(0,i.mB)(e).q??"",scope:t,selectedOneBarModules:(0,i.mB)(e).selected_one_bar_modules,sourceId:(0,i.mB)(e).source_id??"",sourceModuleId:(0,i.mB)(e).source_module_id??"",topPinIds:(0,i.mB)(e).top_pin_ids??""})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/67529-f948122864a3e341.mjs.map