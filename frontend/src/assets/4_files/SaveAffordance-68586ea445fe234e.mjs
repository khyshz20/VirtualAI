(self.modernJsonp=self.modernJsonp||[]).push([["64701"],{713020:function(e,n,t){t.r(n),t.d(n,{default:()=>Z});var o=t(667294),a=t(581722),i=t(20256),r=t(890479),l=t(374114),d=t(111330),s=t(355940),c=t(364843),u=t(525839),p=t(67831);function v({constraint:e}){let n=(0,p.A)(),t=n?.getId();return(0,o.useEffect)(()=>{n&&n.markConstraintComplete(e)},[t,e]),null}var m=t(956077),h=t(821806),S=t(753143),f=t(572227),x=t(341742),P=t(923924),k=t(542963),_=t(441733),C=t(966838),b=t(373950),w=t(78762),y=t(785893);let B=(0,w.Z)(()=>t.e("32560").then(t.bind(t,817631)),void 0,e=>817631,"PinSaveButtonCommon",e=>["32560"]),T=(0,o.lazy)(async()=>({default:(await Promise.all([t.e("86934"),t.e("24660")]).then(t.bind(t,418581))).QuickSaveButtonWithExperienceAnchor})),Z=({boardCount:e=0,clientTrackingParams:n,onBoardSelectionFlyoutChange:t,onClickCallback:w,pin:Z,showEnabledSaveBehavior:g,showRepinOnInitialRender:j,variant:A,viewParameter:I,viewType:D,saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:U})=>{let E=(0,p.A)(),{experience:F}=(0,c.Ow)(1000310),{experience:M}=(0,c.Ow)(12),R=(0,f.Z)(),K=(0,a.I0)(),O=(0,u.ZP)(),N=(0,o.useRef)(!1),{pins:z,clear:J}=(0,k.Z)(),W=(0,S.M0)().getItem(d.M8)||"",q=W?W===Z.id:!!z&&z.length>0&&z[z.length-1].id===Z.id,{shouldSeePinBetterSave:H}=(0,_.Z)();(0,x.Z)(()=>{N.current||2!==z.length&&(1!==z.length||q)||(N.current=!0,(2===z.length&&!W&&q?[z[0]]:z).forEach(({id:e,nodeId:n})=>{(0,l.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},O).then(t=>{let{id:o,url:a,name:i}=t;K((0,C.d)({boardId:o,url:a,title:i||"",pinId:e||"",nodeId:n}))})}),q||J())});let L=()=>{(0,S.M0)().removeItem(d.M8),J(),R({action:"trigger",item:"unauth-save-button-quicksave"}),K((0,b.Z)(!0)),K((0,C.d)({boardId:"",url:"",title:"Profile",pinId:Z.id,nodeId:Z?.node_id})),K((0,C.X)(Z))},V=()=>{(0,m.Nx)("button"),E&&E.markConstraintComplete("button")};if(Z?.pinner?.blocked_by_me||Z?.promoted_is_removable)return(0,m.Nx)("button"),(0,y.jsx)(v,{constraint:"button"});if(!H&&F&&502450===F.experience_id)return(0,y.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(r.Z,{id:"QuickSaveButtonWithExperienceAnchor",children:(0,y.jsx)(T,{autoQuicksaveCallback:L,clientTrackingParams:n,experience:F,onClickCallback:w,onMount:V,pinKey:{type:"deprecated",data:Z},saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:U,shouldAutoQuicksave:q,showEnabledSaveBehavior:g,viewParameter:I})})})});let X=!Z.content_sensitivity?.is_sensitive_content&&void 0!==e||H,G=[501041],Y=M&&501041===M.experience_id&&M.display_data.has_tooltip?e=>(0,y.jsx)(c.Qp,{anchor:e,experienceIds:G,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0}):e=>(0,y.jsx)(c.N,{anchors:{3010:e},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0});return X?(0,y.jsx)(i.xu,{children:(0,y.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,y.jsx)(r.Z,{id:"PinBetterSave",children:(0,y.jsx)(P.default,{autoQuicksaveCallback:L,clientTrackingParams:n,onClickCallback:w,onMount:V,onToggleFlyout:t,pinKey:{type:"deprecated",data:Z},renderPinSaveTooltip:Y,saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:U,shouldAutoQuicksave:q,variant:A,viewParameter:I,viewType:D})})})}):(0,y.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(r.Z,{id:"PinSaveButton",children:(0,y.jsx)(B,{clientTrackingParams:n,isCloseupPin:!0,onClickCallback:w,onMount:V,pinKey:{type:"deprecated",data:Z},renderPinSaveTooltip:Y,saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:U,showRepinOnInitialRender:j})})})})}},373950:function(e,n,t){t.d(n,{Z:()=>o});function o(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/SaveAffordance-68586ea445fe234e.mjs.map